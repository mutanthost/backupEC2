#! /bin/sh
#
# %W% %E%
#
unset JAVA_HOME
JAVA_HOME=/u01/app/oracle/product/19.0.0/dbhome_1/jdk/jre/
export JAVA_HOME
JAVA64FLAG=
JAVAIPV6=
if [ ! -z "$SRCHOME" ]
then
  if [ "x$ENABLETEST_IPV6" = "xtrue" ]
  then
    JAVAIPV6="-Djava.net.preferIPv4Stack=false"
  fi
fi
#JRECLASSPATH=/u01/app/oracle/product/19.0.0/dbhome_1/jdk/jre//lib/rt.jar:/u01/app/oracle/product/19.0.0/dbhome_1/jdk/jre//lib/i18n.jar:$ORACLE_HOME/jdbc/lib/ojdbc8.jar:$ORACLE_HOME/javavm/lib/aurora.zip
#export JRECLASSPATH
THREADS_FLAG=native
export THREADS_FLAG
LD_LIBRARY_PATH=$ORACLE_HOME/lib:$ORACLE_HOME/lib32:$JAVA_HOME/lib
export LD_LIBRARY_PATH
#Need to pull passwords and usernames.
while [ $# -gt 0 ]
do
  if [ "$1" = "-u" ] || [ "$1" = "-user" ];  then
      LJUSER="$1"
      if [ $# -ge 2 ]; then 
         shift
         LJUSER="$LJUSER $1"
      fi
      export LJUSER
  elif [ `echo $1|cut -c1-2` = "-P" ];  then
      LJPASS="-P"
      if [ $# -ge 2 ]; then
        shift
        if [ "$1" = "" ]; then
            LJPASS="$LJPASS \"\""
        else
            LJPASS="$LJPASS $1"
        fi
      fi
      export LJPASS
  elif [ "$1" = "-password" ]; then
      LJPASS=$1
      if [ $# -ge 2 ]; then
        shift
        if [ "$1" = "" ]; then
            LJPASS="$LJPASS \"\""
        else
            LJPASS="$LJPASS $1"
        fi
      fi
      export LJPASS
  elif [ "$1" = "-resolver" ] || [ "$1" = "-R" ]; then
      RESOLVER="$1"
      if [ $# -ge 2 ]; then
        shift
        RESOLVER="$RESOLVER $1"
      fi
      export RESOLVER
  elif [ "$1" = "-debug" ]; then
      DEBUG=1
      args="$args $1"
  else
      args="$args $1" 
  fi 
shift 
done
# If debug is set then use the debug ojdbc jar
# ojdbc8.jar is no longer used and is harc doced to a specific
# jar
if [ "$DEBUG" = 1 ]; then
    JRECLASSPATH=/u01/app/oracle/product/19.0.0/dbhome_1/jdk/jre//lib/rt.jar:/u01/app/oracle/product/19.0.0/dbhome_1/jdk/jre//lib/i18n.jar:$ORACLE_HOME/jdbc/lib/ojdbc8_g.jar:$ORACLE_HOME/javavm/lib/aurora.zip:$ORACLE_HOME/sqlj/lib/translator.jar:$ORACLE_HOME/sqlj/lib/runtime12.jar
else
JRECLASSPATH=/u01/app/oracle/product/19.0.0/dbhome_1/jdk/jre//lib/rt.jar:/u01/app/oracle/product/19.0.0/dbhome_1/jdk/jre//lib/i18n.jar:$ORACLE_HOME/jdbc/lib/ojdbc8.jar:$ORACLE_HOME/javavm/lib/aurora.zip:$ORACLE_HOME/sqlj/lib/translator.jar:$ORACLE_HOME/sqlj/lib/runtime12.jar
fi
export JRECLASSPATH
exec $JAVA_HOME/bin/java $JAVA64FLAG  $JAVAIPV6  -classpath $JRECLASSPATH oracle.aurora.server.tools.loadjava.LoadJavaMain $args
