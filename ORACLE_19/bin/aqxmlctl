
#!/bin/sh -f
#++
# Copyright (c) 2003, 2017, Oracle and/or its affiliates. All rights reserved.
#
#   NAME
#     aqxmlctl - Start and Stop the oc4j server.
#
#   DESCRIPTION
#
#     This is the script to start and stop aqxml oc4j instance
#
#
# MODIFIED
#    ichokshi-  11/16/17 - fetch Oracle Version from env_rdbms.mk
#    rbhyrava   11/04/04 - rbhyrava_aqxml_demo_oc4jdoc
#    rbhyrava-  10/29/04 - Creation
#

#
# Make sure certain environment variables are set 
#
ORACLE_HOME=/u01/app/oracle/product/19.0.0/dbhome_1
JAVA_HOME=/u01/app/oracle/product/19.0.0/dbhome_1/jdk/jre/
JRE_HOME=/u01/app/oracle/product/19.0.0/dbhome_1/jdk/jre/

export ORACLE_HOME
export JAVA_HOME
export JRE_HOME

PERL_BIN=$ORACLE_HOME/perl/bin
export PERL_BIN

if [ "$LD_LIBRARY_PATH" = "" ] ; then
   LD_LIBRARY_PATH=$ORACLE_HOME/lib32:$ORACLE_HOME/lib:$ORACLE_HOME/network/lib:$ORACLE_HOME/perl/lib
else
   LD_LIBRARY_PATH=$ORACLE_HOME/lib32:$ORACLE_HOME/lib:$ORACLE_HOME/network/lib:ORACLE_HOME/perl/lib:$LD_LIBRARY_PATH
fi

# add java lib to LD_LIBRARY_PATH.
if [ "$uname" = "SunOS" ];
then
	LD_LIBRARY_PATH=$JRE_HOME/lib/sparc/client:$JRE_HOME/lib/sparc:$LD_LIBRARY_PATH
elif [ "$uname" = "HP-UX" ]; then
	SHLIB_PATH=$JRE_HOME/lib/PA_RISC2.0/hotspot:$JRE_HOME/lib/PA_RISC2.0:$SHLIB_PATH
elif [ "$uname" = "Linux" ] ; then
	 LD_LIBRARY_PATH=$JRE_HOME/lib/i386/client:$JRE_HOME/lib/i386:$LD_LIBRARY_PATH
fi

export LD_LIBRARY_PATH

#
# Set path so that our native executables can be found when run from java
#
PATH=$ORACLE_HOME/bin:$JAVA_HOME/bin:$PATH
export PATH

TNS_ADMIN=$ORACLE_HOME
export TNS_ADMIN

CUSMK=$ORACLE_HOME/rdbms/lib/env_rdbms.mk
MAJOR_VER=`grep '^MAJORVSN *=' $CUSMK | cut -f2 -d=`
MINOR_VER=`grep '^MINORVSN *=' $CUSMK | cut -f2 -d=`
MIDTIER_VER=`grep '^MIDTIERVSN *=' $CUSMK | cut -f2 -d=`
PATCHMAJOR_VER=`grep '^PATCHMAJORVSN *=' $CUSMK | cut -f2 -d=`
PATCHMINOR_VER=`grep '^PATCHMINORVSN *=' $CUSMK | cut -f2 -d=`

BANNER_VER=$MAJOR_VER.$MINOR_VER.$MIDTIER_VER.$PATCHMAJOR_VER.$PATCHMINOR_VER
export BANNER_VER
export MAJOR_VER

# Execute the aqxmlctl.pl
$PERL_BIN/perl $ORACLE_HOME/bin/aqxmlctl.pl $*

