<?xml version="1.0"?>

<!--  $Header: tfa/src/v2/tfa_home/resources/srdc_dbupgrade.xml /main/8 2018/08/08 23:01:02 recornej Exp $ -->

<!-- 
 Copyright (c) 2017, 2018, Oracle and/or its affiliates. All rights reserved.

   NAME
     srdc_db_upgrade.xml - <one-line expansion of the name>

   DESCRIPTION
     <short description of component this file declares/defines>

   NOTES
     <other useful comments, qualifications, etc.>

   MODIFIED   (MM/DD/YY)
   recornej    08/02/18 - Fix version validations.
   recornej    11/29/17 - Migrate opt in default attribute to required
                          attribute
   bburton     07/24/17 - Change the prompt depending on cwother input
   bburton     06/26/17 - 26132360 - Fix the Description for help
   bburton     05/22/17 - Windows specific orachk needed
   bburton     05/05/17 - Add CRS to this SRDC
   bburton     04/26/17 - Bug 25961789 - Fix issues with setting RAT_OUTPUT for
                          SRDC
   bburton     03/01/17 - SRDC driver for collection of files for db upgrade
                          issues
   bburton     03/01/17 - Creation

-->
<collections>
  <collection id="dbupgrade">
    <description>SRDC for database upgrade problems.</description>
    <alias>dbupgrade</alias>
    <user_inputs>
        <user_input cmdline="" default="" showprompt="1" setenv="REPLACE" validate="" prompt="Enter the Database Name">USERINPUT-DATABASE_NAME</user_input>
        <user_input cmdline="" default="" showprompt="1" setenv="REPLACE" validate="dbversion:noDots" prompt="Enter the version you are upgrading to : Example for database 12.2.0.1 type 12201">USERINPUT-UPGVERS</user_input>
        <user_input cmdline="" required="OPT" showprompt="1" setenv="REPLACE" validate="file" depinput="UPGVERS" deppattern="^11.*" prompt="If this was a Manual Upgrade please Enter the full path to the spooled log from the upgrade scriptLBREAKEnter filename : Example /home/oracle/upgrade.log">USERINPUT-UPGFILE</user_input>
        <user_input cmdline="" required="OPT" showprompt="1" setenv="REPLACE" validate="directory" depinput="UPGVERS" deppattern="^12.*" prompt="If this was a Manual Upgrade please Enter the full path to the upgrade log directoryLBREAKEnter Directory Name : Example /home/oracle/upgrade">USERINPUT-UPGDIR</user_input>
    </user_inputs>
    <onevents>
    </onevents>
    <duration>48h</duration>
    <clusterwide>no</clusterwide>
    <filter_files>
        <types>
        </types>
        <filter_file_patterns>
            <filter_file_pattern>alert_.*\.log</filter_file_pattern>
            <filter_file_pattern>trc</filter_file_pattern>
            <filter_file_pattern>log</filter_file_pattern>
            <filter_file_pattern>\.xml</filter_file_pattern>
            <filter_file_pattern>messages</filter_file_pattern>
            <filter_file_pattern>archive\/osw</filter_file_pattern>
            <filter_file_pattern>ExaWatcher\/archive</filter_file_pattern>
        </filter_file_patterns>
        <filter_file_exclude_patterns>
            <filter_file_exclude_pattern>cdmp_.*_bucket\.tr[cm]</filter_file_exclude_pattern>
        </filter_file_exclude_patterns>
    </filter_files>

    <filter_files>
      <types>
      </types>
      <filter_file_patterns>
      </filter_file_patterns>
      <filter_file_exclude_patterns>
      </filter_file_exclude_patterns>
    </filter_files>
    <components>
      <component>CFGTOOLS</component>
      <component>INSTALL</component>
      <component>DATABASE</component>
      <component>OS</component>
      <component>CRS</component>
      <component>NOCHMOS</component>
      <component>COLLECTALLDIRS</component>
    </components>
    <commands>
       <script type="SQLSCRIPT" name="srdc_dbupgdiag.sql" timeout="300" validfor="" platform="" version="">
       </script>
       <script type="DB" name="srdc_utluxxxs.sql" timeout="300" validfor="" platform="" version="">
       @?/rdbms/admin/utlu%UTLVERS%s.sql
       </script>
       <script type="OS" name="cp_upgrade_log" timeout="120" validfor="" platform="allux" version="">
       if [ -e %UPGFILE% ]; then
       /bin/cp %UPGFILE% .
       fi
       </script>
       <script type="OS" name="cp_upgrade_dir" timeout="120" validfor="" platform="allux" version="">
       if [ -d %UPGDIR% ]; then
       /bin/cp %UPGDIR%/catupgrd* .
       fi
       </script>
   </commands>
   <runtime_flags>
   </runtime_flags>
  </collection>
</collections>
